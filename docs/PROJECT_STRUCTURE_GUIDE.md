# é¡¹ç›®ç»“æ„å®Œæ•´æŒ‡å—

## ğŸ“‹ ç›®å½•

- [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
- [å®Œæ•´ç›®å½•ç»“æ„](#å®Œæ•´ç›®å½•ç»“æ„)
- [æ ¸å¿ƒç›®å½•è¯´æ˜](#æ ¸å¿ƒç›®å½•è¯´æ˜)
- [æ¶æ„åŸåˆ™](#æ¶æ„åŸåˆ™)
- [å¯¼å…¥è·¯å¾„è§„èŒƒ](#å¯¼å…¥è·¯å¾„è§„èŒƒ)
- [æ–‡ä»¶ç»„ç»‡è§„èŒƒ](#æ–‡ä»¶ç»„ç»‡è§„èŒƒ)
- [ä¾èµ–å…³ç³»](#ä¾èµ–å…³ç³»)
- [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªåŸºäº **Next.js 14** çš„ Chrome æ‰©å±•é¡¹ç›®ï¼Œé‡‡ç”¨ **App Router** æ¶æ„ã€‚é¡¹ç›®ç»“æ„éµå¾ª **ä¸šåŠ¡ä¸æŠ€æœ¯åˆ†ç¦»** çš„åŸåˆ™ï¼Œå°†ä¸šåŠ¡é€»è¾‘å’ŒæŠ€æœ¯åŠŸèƒ½æ¸…æ™°åˆ†ç¦»ï¼Œä¾¿äºç»´æŠ¤å’Œæ‰©å±•ã€‚

### æ ¸å¿ƒç‰¹ç‚¹

- âœ… **ä¸šåŠ¡ä¸æŠ€æœ¯åˆ†ç¦»**ï¼š`domains/` å­˜æ”¾ä¸šåŠ¡é€»è¾‘ï¼Œ`features/` å­˜æ”¾æŠ€æœ¯åŠŸèƒ½
- âœ… **åŠŸèƒ½æ¨¡å—åŒ–**ï¼šæ¯ä¸ªåŠŸèƒ½æ¨¡å—åŒ…å«å®Œæ•´çš„ç»„ä»¶ã€é€»è¾‘ã€çŠ¶æ€å’Œç±»å‹
- âœ… **å…±äº«åŸºç¡€è®¾æ–½**ï¼š`shared/` æä¾›è·¨æ¨¡å—çš„é€šç”¨åŠŸèƒ½
- âœ… **ç±»å‹å®‰å…¨**ï¼šå…¨é¢ä½¿ç”¨ TypeScript
- âœ… **æµ‹è¯•è¦†ç›–**ï¼šæ ¸å¿ƒåŠŸèƒ½éƒ½æœ‰æµ‹è¯•ç”¨ä¾‹

---

## å®Œæ•´ç›®å½•ç»“æ„

```
job_side/
â”œâ”€â”€ src/                              # æ‰€æœ‰æºä»£ç 
â”‚   â”œâ”€â”€ app/                          # Next.js App Router
â”‚   â”‚   â”œâ”€â”€ dashboard/               # Dashboard é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ layout.tsx           # Dashboard å¸ƒå±€
â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx             # Dashboard é¦–é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ template.tsx         # Dashboard æ¨¡æ¿
â”‚   â”‚   â”‚   â””â”€â”€ users/               # ç”¨æˆ·ç®¡ç†é¡µé¢ï¼ˆåŠ¨æ€è·¯ç”±ï¼‰
â”‚   â”‚   â”œâ”€â”€ api/                      # API Routesï¼ˆåç«¯ç«¯ç‚¹ï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ auth/                 # è®¤è¯ç›¸å…³ API
â”‚   â”‚   â”‚       â”œâ”€â”€ login/            # POST /api/auth/login
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ route.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ logout/           # POST /api/auth/logout
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ route.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ verify/           # POST /api/auth/verify
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ route.ts
â”‚   â”‚   â”‚       â””â”€â”€ me/               # GET /api/auth/me
â”‚   â”‚   â”‚           â””â”€â”€ route.ts
â”‚   â”‚   â”œâ”€â”€ login/                    # ç™»å½•é¡µé¢
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚   â”œâ”€â”€ settings/                 # è®¾ç½®é¡µé¢
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚   â”œâ”€â”€ layout.tsx                # æ ¹å¸ƒå±€ï¼ˆåŒ…å« Providersï¼‰
â”‚   â”‚   â”œâ”€â”€ page.tsx                  # é¦–é¡µï¼ˆèŠå¤©ç•Œé¢ï¼‰
â”‚   â”‚   â”œâ”€â”€ error.tsx                 # é”™è¯¯è¾¹ç•Œ
â”‚   â”‚   â”œâ”€â”€ global-error.tsx          # å…¨å±€é”™è¯¯è¾¹ç•Œ
â”‚   â”‚   â”œâ”€â”€ loading.tsx                # åŠ è½½çŠ¶æ€ç»„ä»¶
â”‚   â”‚   â””â”€â”€ not-found.tsx             # 404 é¡µé¢
â”‚   â”‚
â”‚   â”œâ”€â”€ components/                    # React UI åŸºç¡€ç»„ä»¶
â”‚   â”‚   â””â”€â”€ ui/                       # shadcn/ui åŸºç¡€ç»„ä»¶
â”‚   â”‚       â”œâ”€â”€ button.tsx            # æŒ‰é’®ç»„ä»¶
â”‚   â”‚       â”œâ”€â”€ input.tsx             # è¾“å…¥æ¡†ç»„ä»¶
â”‚   â”‚       â”œâ”€â”€ scroll-area.tsx       # æ»šåŠ¨åŒºåŸŸç»„ä»¶
â”‚   â”‚       â””â”€â”€ index.ts              # ç»Ÿä¸€å¯¼å‡º
â”‚   â”‚
â”‚   â”œâ”€â”€ domains/                      # ä¸šåŠ¡é¢†åŸŸï¼ˆBusiness Domainsï¼‰
â”‚   â”‚   â”œâ”€â”€ auth/                     # è®¤è¯ä¸šåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ types.ts              # è®¤è¯ç›¸å…³ç±»å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ services/             # è®¤è¯æœåŠ¡å±‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ authService.ts    # å®¢æˆ·ç«¯è®¤è¯æœåŠ¡
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ authServerService.ts  # æœåŠ¡å™¨ç«¯è®¤è¯æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ store/                # è®¤è¯çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ authStore.ts      # Zustand store
â”‚   â”‚   â”‚   â””â”€â”€ index.ts              # ç»Ÿä¸€å¯¼å‡º
â”‚   â”‚   â””â”€â”€ users/                    # ç”¨æˆ·ç®¡ç†ä¸šåŠ¡
â”‚   â”‚       â”œâ”€â”€ types.ts              # ç”¨æˆ·ç›¸å…³ç±»å‹
â”‚   â”‚       â”œâ”€â”€ services/             # ç”¨æˆ·æœåŠ¡å±‚
â”‚   â”‚       â”‚   â””â”€â”€ userService.ts    # ç”¨æˆ·æœåŠ¡
â”‚   â”‚       â””â”€â”€ index.ts              # ç»Ÿä¸€å¯¼å‡º
â”‚   â”‚
â”‚   â”œâ”€â”€ features/                     # æŠ€æœ¯åŠŸèƒ½ï¼ˆTechnical Featuresï¼‰
â”‚   â”‚   â”œâ”€â”€ chat/                     # èŠå¤©åŠŸèƒ½æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ components/           # èŠå¤© UI ç»„ä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ChatContainer.tsx     # èŠå¤©å®¹å™¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ChatInput.tsx     # èŠå¤©è¾“å…¥æ¡†
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ChatMessage.tsx   # èŠå¤©æ¶ˆæ¯
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts          # ç»Ÿä¸€å¯¼å‡º
â”‚   â”‚   â”‚   â”œâ”€â”€ hooks/                 # èŠå¤©ç›¸å…³ hooks
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ useChat.ts        # èŠå¤©é€»è¾‘ Hook
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ __tests__/        # æµ‹è¯•æ–‡ä»¶
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ useChat.test.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ store/                # èŠå¤©çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ chatStore.ts      # Zustand store
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ __tests__/        # æµ‹è¯•æ–‡ä»¶
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ chatStore.test.ts
â”‚   â”‚   â”‚   â””â”€â”€ types.ts              # èŠå¤©ç›¸å…³ç±»å‹
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ i18n/                     # å›½é™…åŒ–åŠŸèƒ½æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ components/           # å›½é™…åŒ–ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ LanguageSwitcher.tsx  # è¯­è¨€åˆ‡æ¢å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ context/              # I18n Context
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ I18nContext.tsx   # å›½é™…åŒ–ä¸Šä¸‹æ–‡
â”‚   â”‚   â”‚   â”œâ”€â”€ locales/              # ç¿»è¯‘æ–‡ä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ zh.ts             # ä¸­æ–‡ç¿»è¯‘
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ en.ts             # è‹±æ–‡ç¿»è¯‘
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts          # å¯¼å‡ºå’Œç±»å‹å®šä¹‰
â”‚   â”‚   â”‚   â””â”€â”€ utils/                # å›½é™…åŒ–å·¥å…·
â”‚   â”‚   â”‚       â”œâ”€â”€ getTranslation.ts # ç¿»è¯‘å‡½æ•°
â”‚   â”‚   â”‚       â”œâ”€â”€ loggerI18n.ts     # æ—¥å¿—å›½é™…åŒ–
â”‚   â”‚   â”‚       â”œâ”€â”€ testI18n.ts       # æµ‹è¯•å·¥å…·
â”‚   â”‚   â”‚       â””â”€â”€ __tests__/        # æµ‹è¯•æ–‡ä»¶
â”‚   â”‚   â”‚           â”œâ”€â”€ getTranslation.test.ts
â”‚   â”‚   â”‚           â”œâ”€â”€ loggerI18n.test.ts
â”‚   â”‚   â”‚           â””â”€â”€ testI18n.test.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ ai/                       # AI åŠŸèƒ½æ¨¡å—
â”‚   â”‚       â”œâ”€â”€ agents/               # LangChain Agents
â”‚   â”‚       â”‚   â”œâ”€â”€ webAgent.ts       # Web Agentï¼ˆæ ‡å‡†ï¼‰
â”‚   â”‚       â”‚   â”œâ”€â”€ webAgentGraph.ts  # Web Agentï¼ˆLangGraphï¼‰
â”‚   â”‚       â”‚   â””â”€â”€ index.ts          # ç»Ÿä¸€å¯¼å‡º
â”‚   â”‚       â”œâ”€â”€ llm/                  # LLM é›†æˆ
â”‚   â”‚       â”‚   â”œâ”€â”€ qwen.ts           # Qwen æ¨¡å‹é›†æˆ
â”‚   â”‚       â”‚   â”œâ”€â”€ index.ts          # ç»Ÿä¸€å¯¼å‡º
â”‚   â”‚       â”‚   â””â”€â”€ __tests__/        # æµ‹è¯•æ–‡ä»¶
â”‚   â”‚       â”‚       â””â”€â”€ qwen.test.ts
â”‚   â”‚       â”œâ”€â”€ tools/                # Web æ“ä½œå·¥å…·
â”‚   â”‚       â”‚   â”œâ”€â”€ webActions.ts     # Web æ“ä½œå·¥å…·å®šä¹‰
â”‚   â”‚       â”‚   â””â”€â”€ __tests__/        # æµ‹è¯•æ–‡ä»¶
â”‚   â”‚       â”‚       â””â”€â”€ webActions.test.ts
â”‚   â”‚       â””â”€â”€ services/             # AI æœåŠ¡
â”‚   â”‚           â”œâ”€â”€ webAction.ts      # Web æ“ä½œæœåŠ¡
â”‚   â”‚           â””â”€â”€ __tests__/       # æµ‹è¯•æ–‡ä»¶
â”‚   â”‚               â””â”€â”€ webAction.test.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ shared/                       # å…±äº«ä»£ç ï¼ˆè·¨åŠŸèƒ½æ¨¡å—ä½¿ç”¨ï¼‰
â”‚   â”‚   â”œâ”€â”€ actions/                  # Server Actions
â”‚   â”‚   â”‚   â””â”€â”€ index.ts             # ç¤ºä¾‹ Server Actions
â”‚   â”‚   â”œâ”€â”€ components/               # å…±äº«ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ AuthGuard.tsx        # è·¯ç”±ä¿æŠ¤ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ data/                     # æ•°æ®è·å–å·¥å…·
â”‚   â”‚   â”‚   â”œâ”€â”€ cache.ts              # ç¼“å­˜ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ fetcher.ts            # æ•°æ®è·å–å‡½æ•°
â”‚   â”‚   â”‚   â””â”€â”€ __tests__/           # æµ‹è¯•æ–‡ä»¶
â”‚   â”‚   â”‚       â”œâ”€â”€ cache.test.ts
â”‚   â”‚   â”‚       â””â”€â”€ fetcher.test.ts
â”‚   â”‚   â”œâ”€â”€ hooks/                    # é€šç”¨ React Hooks
â”‚   â”‚   â”‚   â””â”€â”€ useRouter.ts         # è·¯ç”± Hook
â”‚   â”‚   â”œâ”€â”€ logger/                   # æ—¥å¿—å·¥å…·
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts             # æ—¥å¿—å·¥å…·ä¸»æ–‡ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ __tests__/           # æµ‹è¯•æ–‡ä»¶
â”‚   â”‚   â”‚       â””â”€â”€ logger.test.ts
â”‚   â”‚   â”œâ”€â”€ providers/                # å…¨å±€ Providers
â”‚   â”‚   â”‚   â”œâ”€â”€ I18nProviderWrapper.tsx  # å›½é™…åŒ– Provider
â”‚   â”‚   â”‚   â”œâ”€â”€ StoreProvider.tsx    # çŠ¶æ€ç®¡ç† Provider
â”‚   â”‚   â”‚   â”œâ”€â”€ ThemeProvider.tsx    # ä¸»é¢˜ Provider
â”‚   â”‚   â”‚   â””â”€â”€ index.ts             # ç»Ÿä¸€å¯¼å‡º
â”‚   â”‚   â”œâ”€â”€ routes/                   # è·¯ç”±é…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts             # è·¯ç”±å®šä¹‰å’Œå·¥å…·
â”‚   â”‚   â”‚   â””â”€â”€ __tests__/           # æµ‹è¯•æ–‡ä»¶
â”‚   â”‚   â”‚       â””â”€â”€ routes.test.ts
â”‚   â”‚   â”œâ”€â”€ store/                    # å…¨å±€çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ appStore.ts           # åº”ç”¨å…¨å±€çŠ¶æ€
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts              # ç»Ÿä¸€å¯¼å‡º
â”‚   â”‚   â”‚   â””â”€â”€ __tests__/           # æµ‹è¯•æ–‡ä»¶
â”‚   â”‚   â”‚       â””â”€â”€ appStore.test.ts
â”‚   â”‚   â”œâ”€â”€ types/                    # é€šç”¨ç±»å‹å®šä¹‰
â”‚   â”‚   â”‚   â”œâ”€â”€ env.d.ts             # ç¯å¢ƒå˜é‡ç±»å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts             # é€šç”¨ç±»å‹å¯¼å‡º
â”‚   â”‚   â”‚   â””â”€â”€ env/                 # ç¯å¢ƒå˜é‡ç±»å‹ï¼ˆç©ºç›®å½•ï¼‰
â”‚   â”‚   â””â”€â”€ utils/                    # é€šç”¨å·¥å…·å‡½æ•°
â”‚   â”‚       â”œâ”€â”€ utils.ts             # å·¥å…·å‡½æ•°ï¼ˆcn ç­‰ï¼‰
â”‚   â”‚       â””â”€â”€ __tests__/           # æµ‹è¯•æ–‡ä»¶
â”‚   â”‚           â””â”€â”€ utils.test.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ styles/                       # æ ·å¼æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ globals.css               # å…¨å±€æ ·å¼ï¼ˆTailwind CSSï¼‰
â”‚   â”‚
â”‚   â””â”€â”€ tests/                        # æµ‹è¯•å·¥å…·
â”‚       â””â”€â”€ runner.ts                 # æµ‹è¯•è¿è¡Œå™¨
â”‚
â”œâ”€â”€ extension/                        # Chrome Extension ç›¸å…³æ–‡ä»¶
â”‚   â”œâ”€â”€ manifest.json                 # Extension æ¸…å•æ–‡ä»¶
â”‚   â””â”€â”€ background.js                 # Service Worker
â”‚
â”œâ”€â”€ public/                           # é™æ€èµ„æº
â”‚   â”œâ”€â”€ favicon.ico                   # ç½‘ç«™å›¾æ ‡
â”‚   â””â”€â”€ ...                           # å…¶ä»–é™æ€æ–‡ä»¶
â”‚
â”œâ”€â”€ scripts/                          # æ„å»ºå’Œå·¥å…·è„šæœ¬
â”‚   â”œâ”€â”€ build-extension.js            # æ„å»º Extension è„šæœ¬
â”‚   â”œâ”€â”€ run-tests.ts                  # è¿è¡Œæµ‹è¯•è„šæœ¬
â”‚   â””â”€â”€ test-qwen.ts                  # Qwen æµ‹è¯•è„šæœ¬
â”‚
â”œâ”€â”€ docs/                             # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ PROJECT_STRUCTURE_GUIDE.md     # é¡¹ç›®ç»“æ„æŒ‡å—ï¼ˆæœ¬æ–‡æ¡£ï¼‰
â”‚   â”œâ”€â”€ PROJECT_STRUCTURE.md          # é¡¹ç›®ç»“æ„è¯´æ˜ï¼ˆç®€åŒ–ç‰ˆï¼‰
â”‚   â”œâ”€â”€ FEATURES.md                   # åŠŸèƒ½è¯´æ˜
â”‚   â”œâ”€â”€ AUTH_GUIDE.md                 # è®¤è¯åŠŸèƒ½æŒ‡å—
â”‚   â”œâ”€â”€ API_ROUTES_GUIDE.md           # API Routes æŒ‡å—
â”‚   â”œâ”€â”€ TESTING.md                    # æµ‹è¯•æ–‡æ¡£
â”‚   â””â”€â”€ ...                           # å…¶ä»–æ–‡æ¡£
â”‚
â”œâ”€â”€ middleware.ts                     # Next.js ä¸­é—´ä»¶
â”œâ”€â”€ next.config.js                    # Next.js é…ç½®
â”œâ”€â”€ tailwind.config.ts                # Tailwind CSS é…ç½®
â”œâ”€â”€ postcss.config.js                 # PostCSS é…ç½®
â”œâ”€â”€ tsconfig.json                     # TypeScript é…ç½®
â”œâ”€â”€ components.json                   # shadcn/ui é…ç½®
â””â”€â”€ package.json                      # é¡¹ç›®ä¾èµ–å’Œè„šæœ¬
```

---

## æ ¸å¿ƒç›®å½•è¯´æ˜

### 1. `src/app/` - Next.js App Router

**èŒè´£**ï¼šå®šä¹‰æ‰€æœ‰é¡µé¢è·¯ç”±å’Œ API è·¯ç”±

#### è·¯ç”±ç±»å‹

- **é¡µé¢è·¯ç”±**ï¼š`page.tsx` æ–‡ä»¶å®šä¹‰é¡µé¢
- **å¸ƒå±€è·¯ç”±**ï¼š`layout.tsx` æ–‡ä»¶å®šä¹‰å¸ƒå±€
- **API è·¯ç”±**ï¼š`route.ts` æ–‡ä»¶å®šä¹‰ API ç«¯ç‚¹
- **ç‰¹æ®Šæ–‡ä»¶**ï¼š`error.tsx`ã€`loading.tsx`ã€`not-found.tsx`

#### è·¯ç”±ç»„ç»‡

- æ‰€æœ‰è·¯ç”±ç›´æ¥åœ¨ `app/` ç›®å½•ä¸‹ç»„ç»‡
- ä½¿ç”¨åµŒå¥—ç›®å½•åˆ›å»ºåµŒå¥—è·¯ç”±
- ä¾‹å¦‚ï¼š`app/dashboard/` â†’ `/dashboard`

#### API Routes

- ä½ç½®ï¼š`app/api/**/route.ts`
- æ”¯æŒ HTTP æ–¹æ³•ï¼šGETã€POSTã€PUTã€DELETE ç­‰
- ç¤ºä¾‹ï¼š`app/api/auth/login/route.ts` â†’ `POST /api/auth/login`

### 2. `src/components/` - UI åŸºç¡€ç»„ä»¶

**èŒè´£**ï¼šåªåŒ…å«å¯å¤ç”¨çš„åŸºç¡€ UI ç»„ä»¶

- **`ui/`**ï¼šshadcn/ui ç»„ä»¶åº“çš„åŸºç¡€ç»„ä»¶
- **ä¸åŒ…å«ä¸šåŠ¡ç»„ä»¶**ï¼šä¸šåŠ¡ç»„ä»¶åº”æ”¾åœ¨å¯¹åº”çš„ `features/` æˆ– `domains/` ä¸‹

### 3. `src/domains/` - ä¸šåŠ¡é¢†åŸŸ

**èŒè´£**ï¼šå­˜æ”¾å…·ä½“çš„ä¸šåŠ¡é€»è¾‘æ¨¡å—

#### ç»„ç»‡æ–¹å¼

æ¯ä¸ªä¸šåŠ¡é¢†åŸŸåŒ…å«ï¼š
- **`types.ts`**ï¼šä¸šåŠ¡ç›¸å…³ç±»å‹å®šä¹‰
- **`services/`**ï¼šä¸šåŠ¡æœåŠ¡å±‚ï¼ˆAPI è°ƒç”¨ã€ä¸šåŠ¡é€»è¾‘ï¼‰
- **`store/`**ï¼šä¸šåŠ¡çŠ¶æ€ç®¡ç†ï¼ˆå¯é€‰ï¼‰
- **`index.ts`**ï¼šç»Ÿä¸€å¯¼å‡º

#### å½“å‰ä¸šåŠ¡é¢†åŸŸ

- **`auth/`**ï¼šè®¤è¯ä¸šåŠ¡
  - ç™»å½•ã€ç™»å‡ºã€token éªŒè¯
  - ç”¨æˆ·ä¿¡æ¯è·å–
- **`users/`**ï¼šç”¨æˆ·ç®¡ç†ä¸šåŠ¡
  - ç”¨æˆ· CRUD æ“ä½œ
  - ç”¨æˆ·æœåŠ¡å±‚

#### æœªæ¥å¯èƒ½çš„ä¸šåŠ¡é¢†åŸŸ

- `orders/` - è®¢å•ç®¡ç†
- `products/` - äº§å“ç®¡ç†
- `payments/` - æ”¯ä»˜ç®¡ç†

### 4. `src/features/` - æŠ€æœ¯åŠŸèƒ½

**èŒè´£**ï¼šå­˜æ”¾å¯å¤ç”¨çš„æŠ€æœ¯åŠŸèƒ½æ¨¡å—

#### ç»„ç»‡æ–¹å¼

æ¯ä¸ªåŠŸèƒ½æ¨¡å—åŒ…å«ï¼š
- **`components/`**ï¼šåŠŸèƒ½ç›¸å…³ UI ç»„ä»¶
- **`hooks/`**ï¼šåŠŸèƒ½ç›¸å…³ React Hooks
- **`store/`**ï¼šåŠŸèƒ½çŠ¶æ€ç®¡ç†ï¼ˆZustandï¼‰
- **`types.ts`**ï¼šåŠŸèƒ½ç›¸å…³ç±»å‹å®šä¹‰
- **`__tests__/`**ï¼šæµ‹è¯•æ–‡ä»¶

#### å½“å‰æŠ€æœ¯åŠŸèƒ½

##### `features/chat/` - èŠå¤©åŠŸèƒ½

- **ç»„ä»¶**ï¼šChatContainerã€ChatInputã€ChatMessage
- **Hook**ï¼šuseChat - èŠå¤©é€»è¾‘
- **Store**ï¼šchatStore - èŠå¤©çŠ¶æ€ç®¡ç†
- **ç±»å‹**ï¼šMessage ç­‰

##### `features/i18n/` - å›½é™…åŒ–åŠŸèƒ½

- **ç»„ä»¶**ï¼šLanguageSwitcher
- **Context**ï¼šI18nContext
- **ç¿»è¯‘æ–‡ä»¶**ï¼šzh.tsã€en.ts
- **å·¥å…·**ï¼šgetTranslationã€loggerI18n

##### `features/ai/` - AI åŠŸèƒ½

- **Agents**ï¼šwebAgentã€webAgentGraphï¼ˆLangChainï¼‰
- **LLM**ï¼šqwen.tsï¼ˆQwen æ¨¡å‹é›†æˆï¼‰
- **Tools**ï¼šwebActions.tsï¼ˆWeb æ“ä½œå·¥å…·ï¼‰
- **Services**ï¼šwebAction.tsï¼ˆWeb æ“ä½œæœåŠ¡ï¼‰

### 5. `src/shared/` - å…±äº«ä»£ç 

**èŒè´£**ï¼šæä¾›è·¨åŠŸèƒ½æ¨¡å—çš„é€šç”¨åŠŸèƒ½

#### ç›®å½•è¯´æ˜

- **`actions/`**ï¼šServer Actionsï¼ˆç¤ºä¾‹ä»£ç ï¼‰
- **`components/`**ï¼šå…±äº«ç»„ä»¶ï¼ˆå¦‚ AuthGuardï¼‰
- **`data/`**ï¼šæ•°æ®è·å–å·¥å…·ï¼ˆcacheã€fetcherï¼‰
- **`hooks/`**ï¼šé€šç”¨ React Hooks
- **`logger/`**ï¼šæ—¥å¿—å·¥å…·
- **`providers/`**ï¼šå…¨å±€ Providersï¼ˆI18nã€Storeã€Themeï¼‰
- **`routes/`**ï¼šè·¯ç”±é…ç½®å’Œå·¥å…·
- **`store/`**ï¼šå…¨å±€çŠ¶æ€ç®¡ç†ï¼ˆappStoreï¼‰
- **`types/`**ï¼šé€šç”¨ç±»å‹å®šä¹‰
- **`utils/`**ï¼šé€šç”¨å·¥å…·å‡½æ•°

---

## æ¶æ„åŸåˆ™

### 1. ä¸šåŠ¡ä¸æŠ€æœ¯åˆ†ç¦»

```
domains/     â†’ ä¸šåŠ¡é€»è¾‘ï¼ˆBusiness Logicï¼‰
features/    â†’ æŠ€æœ¯åŠŸèƒ½ï¼ˆTechnical Featuresï¼‰
shared/      â†’ å…±äº«åŸºç¡€è®¾æ–½ï¼ˆShared Infrastructureï¼‰
```

### 2. ä¾èµ–æ–¹å‘è§„åˆ™

```
app/         â†’ å¯ä»¥ä½¿ç”¨ domainsã€featuresã€shared
domains/     â†’ å¯ä»¥ä½¿ç”¨ sharedã€featuresï¼ˆæŠ€æœ¯åŠŸèƒ½ï¼‰
features/    â†’ å¯ä»¥ä½¿ç”¨ shared
shared/      â†’ ä¸ä¾èµ– domains æˆ– featuresï¼ˆå•å‘ä¾èµ–ï¼‰
```

**é‡è¦**ï¼š`shared` ä¸åº”è¯¥ä¾èµ– `features` æˆ– `domains`

### 3. åŠŸèƒ½æ¨¡å—å®Œæ•´æ€§

æ¯ä¸ªåŠŸèƒ½æ¨¡å—ï¼ˆ`features/` æˆ– `domains/`ï¼‰åº”è¯¥åŒ…å«ï¼š
- âœ… ç»„ä»¶ï¼ˆcomponentsï¼‰
- âœ… é€»è¾‘ï¼ˆhooks/servicesï¼‰
- âœ… çŠ¶æ€ï¼ˆstoreï¼‰
- âœ… ç±»å‹ï¼ˆtypesï¼‰
- âœ… æµ‹è¯•ï¼ˆ__tests__ï¼‰

### 4. æµ‹è¯•æ–‡ä»¶ç»„ç»‡

- æµ‹è¯•æ–‡ä»¶æ”¾åœ¨æºä»£ç çš„ `__tests__/` ç›®å½•ä¸‹
- æµ‹è¯•æ–‡ä»¶å‘½åï¼š`*.test.ts` æˆ– `*.spec.ts`
- æµ‹è¯•æ–‡ä»¶åº”ä¸æºä»£ç ä¿æŒç›¸åŒçš„ç›®å½•ç»“æ„

---

## å¯¼å…¥è·¯å¾„è§„èŒƒ

### è·¯å¾„åˆ«å

é¡¹ç›®ä½¿ç”¨ `@/` ä½œä¸º `src/` çš„åˆ«åï¼ˆåœ¨ `tsconfig.json` ä¸­é…ç½®ï¼‰

### å¯¼å…¥ç¤ºä¾‹

```typescript
// âœ… ä¸šåŠ¡é¢†åŸŸå¯¼å…¥
import { userService, type User } from "@/domains/users"
import { authService, useAuthStore } from "@/domains/auth"

// âœ… æŠ€æœ¯åŠŸèƒ½å¯¼å…¥
import { useChat } from "@/features/chat/hooks/useChat"
import { useChatStore } from "@/features/chat/store/chatStore"
import { ChatContainer } from "@/features/chat/components/ChatContainer"
import { useI18n } from "@/features/i18n/context/I18nContext"
import { executeWebAction } from "@/features/ai/services/webAction"

// âœ… å…±äº«ä»£ç å¯¼å…¥
import { logger } from "@/shared/logger"
import { cn } from "@/shared/utils/utils"
import { useRouter } from "@/shared/hooks/useRouter"
import { useAppStore } from "@/shared/store/appStore"
import { AuthGuard } from "@/shared/components/AuthGuard"

// âœ… UI ç»„ä»¶å¯¼å…¥
import { Button } from "@/components/ui/button"
import { Input } from "@/components/ui/input"

// âœ… é¡µé¢å’Œè·¯ç”±å¯¼å…¥
import { routes } from "@/shared/routes"

// âŒ é”™è¯¯ï¼šä¸è¦ä½¿ç”¨ç›¸å¯¹è·¯å¾„
import { useChat } from "../../features/chat/hooks/useChat"

// âŒ é”™è¯¯ï¼šshared ä¸åº”è¯¥å¯¼å…¥ features
// import { useChatStore } from "@/features/chat/store/chatStore"  // åœ¨ shared ä¸­
```

---

## æ–‡ä»¶ç»„ç»‡è§„èŒƒ

### 1. æ–‡ä»¶å‘½å

- **ç»„ä»¶æ–‡ä»¶**ï¼šPascalCaseï¼Œå¦‚ `ChatContainer.tsx`
- **å·¥å…·æ–‡ä»¶**ï¼šcamelCaseï¼Œå¦‚ `useChat.ts`ã€`getTranslation.ts`
- **ç±»å‹æ–‡ä»¶**ï¼š`types.ts` æˆ– `*.types.ts`
- **æµ‹è¯•æ–‡ä»¶**ï¼š`*.test.ts` æˆ– `*.spec.ts`
- **é…ç½®æ–‡ä»¶**ï¼škebab-caseï¼Œå¦‚ `next.config.js`

### 2. ç›®å½•ç»„ç»‡

- **åŠŸèƒ½æ¨¡å—**ï¼šæŒ‰åŠŸèƒ½ç»„ç»‡ï¼ŒåŒ…å«å®Œæ•´çš„å­ç›®å½•
- **æµ‹è¯•æ–‡ä»¶**ï¼šæ”¾åœ¨ `__tests__/` ç›®å½•ä¸‹
- **å¯¼å‡ºæ–‡ä»¶**ï¼šä½¿ç”¨ `index.ts` ç»Ÿä¸€å¯¼å‡º

### 3. ä»£ç ç»„ç»‡

```typescript
// âœ… æ¨èï¼šä½¿ç”¨ index.ts ç»Ÿä¸€å¯¼å‡º
// features/chat/components/index.ts
export { ChatContainer } from "./ChatContainer"
export { ChatInput } from "./ChatInput"
export { ChatMessage } from "./ChatMessage"
export type { Message } from "@/features/chat/types"

// âœ… æ¨èï¼šæ¸…æ™°çš„å¯¼å…¥
import { ChatContainer, ChatInput } from "@/features/chat/components"
```

---

## ä¾èµ–å…³ç³»

### ä¾èµ–å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   app/  â”‚ â”€â”€â”
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚domains/ â”‚ â”€â”€â”¼â”€â”€â†’â”‚ features/â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚         â”‚
              â”‚         â”‚
              â–¼         â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ shared/  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä¾èµ–è§„åˆ™

1. **`app/`** å¯ä»¥ä½¿ç”¨æ‰€æœ‰æ¨¡å—
2. **`domains/`** å¯ä»¥ä½¿ç”¨ `features/` å’Œ `shared/`
3. **`features/`** å¯ä»¥ä½¿ç”¨ `shared/`
4. **`shared/`** ä¸ä¾èµ–å…¶ä»–æ¨¡å—ï¼ˆå•å‘ä¾èµ–ï¼‰

### é¿å…å¾ªç¯ä¾èµ–

- ä¸è¦åœ¨ `shared/` ä¸­å¯¼å…¥ `features/` æˆ– `domains/`
- ä¸è¦åœ¨ `features/` ä¹‹é—´ç›¸äº’å¯¼å…¥
- ä½¿ç”¨ä¾èµ–æ³¨å…¥æˆ–äº‹ä»¶ç³»ç»Ÿå¤„ç†è·¨æ¨¡å—é€šä¿¡

---

## æœ€ä½³å®è·µ

### 1. æ·»åŠ æ–°åŠŸèƒ½

#### æ·»åŠ æ–°ä¸šåŠ¡é¢†åŸŸ

```bash
src/domains/
â””â”€â”€ new-domain/          # æ–°ä¸šåŠ¡é¢†åŸŸ
    â”œâ”€â”€ types.ts         # ç±»å‹å®šä¹‰
    â”œâ”€â”€ services/        # æœåŠ¡å±‚
    â”‚   â””â”€â”€ newService.ts
    â”œâ”€â”€ store/           # çŠ¶æ€ç®¡ç†ï¼ˆå¯é€‰ï¼‰
    â”‚   â””â”€â”€ newStore.ts
    â””â”€â”€ index.ts         # ç»Ÿä¸€å¯¼å‡º
```

#### æ·»åŠ æ–°æŠ€æœ¯åŠŸèƒ½

```bash
src/features/
â””â”€â”€ new-feature/         # æ–°æŠ€æœ¯åŠŸèƒ½
    â”œâ”€â”€ components/      # UI ç»„ä»¶
    â”œâ”€â”€ hooks/          # React Hooks
    â”œâ”€â”€ store/          # çŠ¶æ€ç®¡ç†
    â”œâ”€â”€ types.ts        # ç±»å‹å®šä¹‰
    â””â”€â”€ __tests__/      # æµ‹è¯•æ–‡ä»¶
```

### 2. ä»£ç ç»„ç»‡

- âœ… æ¯ä¸ªåŠŸèƒ½æ¨¡å—åŒ…å«å®Œæ•´çš„ä»£ç ï¼ˆç»„ä»¶ã€é€»è¾‘ã€çŠ¶æ€ã€ç±»å‹ï¼‰
- âœ… ä½¿ç”¨ `index.ts` ç»Ÿä¸€å¯¼å‡º
- âœ… æµ‹è¯•æ–‡ä»¶ä¸æºä»£ç ç›¸é‚»
- âœ… ç±»å‹å®šä¹‰é›†ä¸­ç®¡ç†

### 3. å¯¼å…¥è§„èŒƒ

- âœ… ä½¿ç”¨ `@/` åˆ«åï¼Œé¿å…ç›¸å¯¹è·¯å¾„
- âœ… ä» `index.ts` å¯¼å…¥ï¼Œè€Œä¸æ˜¯ç›´æ¥å¯¼å…¥æ–‡ä»¶
- âœ… æ˜ç¡®å¯¼å…¥ç±»å‹ï¼š`import type { ... }`

### 4. çŠ¶æ€ç®¡ç†

- **å…¨å±€çŠ¶æ€**ï¼š`shared/store/appStore.ts`
- **åŠŸèƒ½çŠ¶æ€**ï¼š`features/*/store/*.ts`
- **ä¸šåŠ¡çŠ¶æ€**ï¼š`domains/*/store/*.ts`

### 5. API è°ƒç”¨

- **æœåŠ¡å±‚**ï¼šåœ¨ `domains/*/services/` æˆ– `features/*/services/` ä¸­
- **æ•°æ®è·å–**ï¼šä½¿ç”¨ `shared/data/fetcher.ts`
- **API Routes**ï¼šåœ¨ `app/api/` ä¸­å®šä¹‰

---

## å¸¸è§é—®é¢˜

### Q1: åº”è¯¥æŠŠä»£ç æ”¾åœ¨ `domains/` è¿˜æ˜¯ `features/`ï¼Ÿ

**A**: 
- **ä¸šåŠ¡é€»è¾‘** â†’ `domains/`ï¼ˆå¦‚ç”¨æˆ·ç®¡ç†ã€è®¢å•ç®¡ç†ï¼‰
- **æŠ€æœ¯åŠŸèƒ½** â†’ `features/`ï¼ˆå¦‚èŠå¤©ã€å›½é™…åŒ–ã€AIï¼‰

### Q2: å¯ä»¥åœ¨ `shared/` ä¸­å¯¼å…¥ `features/` å—ï¼Ÿ

**A**: âŒ ä¸å¯ä»¥ã€‚`shared/` ä¸åº”è¯¥ä¾èµ– `features/` æˆ– `domains/`ã€‚å¦‚æœéœ€è¦ï¼Œåº”è¯¥ï¼š
- å°†ä»£ç ç§»åˆ° `shared/` ä¸­
- æˆ–è€…ä½¿ç”¨ä¾èµ–æ³¨å…¥

### Q3: æµ‹è¯•æ–‡ä»¶åº”è¯¥æ”¾åœ¨å“ªé‡Œï¼Ÿ

**A**: æµ‹è¯•æ–‡ä»¶åº”è¯¥æ”¾åœ¨æºä»£ç çš„ `__tests__/` ç›®å½•ä¸‹ï¼Œä¸æºä»£ç ä¿æŒç›¸åŒçš„ç›®å½•ç»“æ„ã€‚

### Q4: å¦‚ä½•æ·»åŠ æ–°çš„ API Routeï¼Ÿ

**A**: åœ¨ `app/api/` ä¸‹åˆ›å»ºæ–°çš„ç›®å½•å’Œ `route.ts` æ–‡ä»¶ï¼š
```typescript
// app/api/new-endpoint/route.ts
export async function GET() { ... }
export async function POST() { ... }
```

### Q5: ç»„ä»¶åº”è¯¥æ”¾åœ¨å“ªé‡Œï¼Ÿ

**A**: 
- **åŸºç¡€ UI ç»„ä»¶** â†’ `components/ui/`
- **åŠŸèƒ½ç»„ä»¶** â†’ `features/*/components/`
- **ä¸šåŠ¡ç»„ä»¶** â†’ `domains/*/components/`ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
- **å…±äº«ç»„ä»¶** â†’ `shared/components/`

---

## ç›¸å…³æ–‡æ¡£

- [PROJECT_STRUCTURE.md](./PROJECT_STRUCTURE.md) - é¡¹ç›®ç»“æ„è¯´æ˜ï¼ˆç®€åŒ–ç‰ˆï¼‰
- [FEATURES.md](./FEATURES.md) - åŠŸèƒ½è¯´æ˜
- [AUTH_GUIDE.md](./AUTH_GUIDE.md) - è®¤è¯åŠŸèƒ½æŒ‡å—
- [API_ROUTES_GUIDE.md](./API_ROUTES_GUIDE.md) - API Routes æŒ‡å—
- [TESTING.md](./TESTING.md) - æµ‹è¯•æ–‡æ¡£
- [STRUCTURE_OPTIMIZATION_2024.md](./STRUCTURE_OPTIMIZATION_2024.md) - ç»“æ„ä¼˜åŒ–æ€»ç»“

---

## æ›´æ–°æ—¥å¿—

- **2024-11-08**: åˆ›å»ºå®Œæ•´çš„é¡¹ç›®ç»“æ„æŒ‡å—
- **2024-11-08**: ä¼˜åŒ–ä¾èµ–æ–¹å‘ï¼Œä¿®å¤ shared ä¾èµ– features çš„é—®é¢˜
- **2024-11-08**: ç§»åŠ¨æµ‹è¯•æ–‡ä»¶åˆ°æ­£ç¡®ä½ç½®

---

**æœ€åæ›´æ–°**: 2024-11-08

